name: Save-Bot

on:
  workflow_dispatch:

jobs:
  save-env:
    runs-on: ubuntu-latest
    steps:
      - name: Save secrets and vars to .giri-env
        env:
          # Secrets (shared - no prefixes)
          AGE_SECRET_KEY: ${{ secrets.AGE_SECRET_KEY }}
          AGE_PUBLIC_KEY: ${{ secrets.AGE_PUBLIC_KEY }}
          GH_PAT: ${{ secrets.GH_PAT }}
          GOOGLE_API_KEY: ${{ secrets.GOOGLE_API_KEY }}
          COHERE_API_KEY: ${{ secrets.COHERE_API_KEY }}
          CEREBRAS_API_KEY: ${{ secrets.CEREBRAS_API_KEY }}
          TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          LINKEDIN_ACCESS_TOKEN: ${{ secrets.LINKEDIN_ACCESS_TOKEN }}
          IMGBB_CLIENT_ID: ${{ secrets.IMGBB_CLIENT_ID }}
          PEXELS_API_KEY: ${{ secrets.PEXELS_API_KEY }}
          PIXABAY_API_KEY: ${{ secrets.PIXABAY_API_KEY }}
          # Vars
          TELEGRAM_WEBHOOK_URL: ${{ vars.TELEGRAM_WEBHOOK_URL }}
          BLOGGER_LLM_PROVIDER: ${{ vars.BLOGGER_LLM_PROVIDER }}
          BLOGGER_USER_APPROVAL: ${{ vars.BLOGGER_USER_APPROVAL }}
          YOUTUBE_LLM_PROVIDER: ${{ vars.YOUTUBE_LLM_PROVIDER }}
          YOUTUBE_USER_APPROVAL: ${{ vars.YOUTUBE_USER_APPROVAL }}
        run: |
          cat > .giri-env << EOF
          # Secrets (shared)
          AGE_SECRET_KEY=${AGE_SECRET_KEY}
          AGE_PUBLIC_KEY=${AGE_PUBLIC_KEY}
          GH_PAT=${GH_PAT}
          GOOGLE_API_KEY=${GOOGLE_API_KEY}
          COHERE_API_KEY=${COHERE_API_KEY}
          CEREBRAS_API_KEY=${CEREBRAS_API_KEY}
          TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
          TELEGRAM_CHAT_ID=${TELEGRAM_CHAT_ID}
          LINKEDIN_ACCESS_TOKEN=${LINKEDIN_ACCESS_TOKEN}
          IMGBB_CLIENT_ID=${IMGBB_CLIENT_ID}
          PEXELS_API_KEY=${PEXELS_API_KEY}
          PIXABAY_API_KEY=${PIXABAY_API_KEY}
          # Vars
          TELEGRAM_WEBHOOK_URL=${TELEGRAM_WEBHOOK_URL}
          BLOGGER_LLM_PROVIDER=${BLOGGER_LLM_PROVIDER}
          BLOGGER_USER_APPROVAL=${BLOGGER_USER_APPROVAL}
          YOUTUBE_LLM_PROVIDER=${YOUTUBE_LLM_PROVIDER}
          YOUTUBE_USER_APPROVAL=${YOUTUBE_USER_APPROVAL}
          EOF

      - name: Upload .giri-env as artifact
        uses: actions/upload-artifact@v4
        with:
          name: giri-env
          path: .giri-env
          retention-days: 1
          include-hidden-files: true

