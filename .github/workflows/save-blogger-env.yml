name: Save-Blogger-Env

on:
  workflow_dispatch:

jobs:
  save-env:
    runs-on: ubuntu-latest
    steps:
      - name: Save Blogger and Semiconzone secrets and vars to .env
        env:
          # Shared Secrets
          GOOGLE_API_KEY: ${{ secrets.GOOGLE_API_KEY }}
          COHERE_API_KEY: ${{ secrets.COHERE_API_KEY }}
          CEREBRAS_API_KEY: ${{ secrets.CEREBRAS_API_KEY }}
          GH_PAT: ${{ secrets.GH_PAT }}
          
          # Blogger Secrets
          BLOGGER_BLOG_ID: ${{ secrets.BLOGGER_BLOG_ID }}
          BLOGGER_LINKEDIN_ACCESS_TOKEN: ${{ secrets.BLOGGER_LINKEDIN_ACCESS_TOKEN }}
          BLOGGER_IMGBB_CLIENT_ID: ${{ secrets.BLOGGER_IMGBB_CLIENT_ID }}
          BLOGGER_TELEGRAM_BOT_TOKEN: ${{ secrets.BLOGGER_TELEGRAM_BOT_TOKEN }}
          BLOGGER_TELEGRAM_CHAT_ID: ${{ secrets.BLOGGER_TELEGRAM_CHAT_ID }}
          BLOGGER_BOT_GITHUB_TOKEN: ${{ secrets.GH_PAT }}
          
          # Semiconzone Secrets
          SEMICONZONE_BLOG_ID: ${{ secrets.SEMICONZONE_BLOG_ID }}
          SEMICONZONE_LINKEDIN_ACCESS_TOKEN: ${{ secrets.SEMICONZONE_LINKEDIN_ACCESS_TOKEN }}
          SEMICONZONE_IMGBB_CLIENT_ID: ${{ secrets.SEMICONZONE_IMGBB_CLIENT_ID }}
          SEMICONZONE_TELEGRAM_BOT_TOKEN: ${{ secrets.SEMICONZONE_TELEGRAM_BOT_TOKEN }}
          SEMICONZONE_TELEGRAM_CHAT_ID: ${{ secrets.SEMICONZONE_TELEGRAM_CHAT_ID }}
          SEMICONZONE_BOT_GITHUB_TOKEN: ${{ secrets.GH_PAT }}
          
          # Blogger Variables
          BLOGGER_MAX_BLOGS_POSTS: ${{ vars.BLOGGER_MAX_BLOGS_POSTS }}
          BLOGGER_BLOG_UPLOAD: ${{ vars.BLOGGER_BLOG_UPLOAD }}
          BLOGGER_USER_APPROVAL: ${{ vars.BLOGGER_USER_APPROVAL }}
          BLOGGER_REJECTED_STATE: ${{ vars.BLOGGER_REJECTED_STATE }}
          BLOGGER_BLOG_GENERATE: ${{ vars.BLOGGER_BLOG_GENERATE }}
          BLOGGER_IMAGE_UPLOAD: ${{ vars.BLOGGER_IMAGE_UPLOAD }}
          BLOGGER_SCHEDULE_INTERVAL: ${{ vars.BLOGGER_SCHEDULE_INTERVAL }}
          BLOGGER_LINKEDIN_UPLOAD: ${{ vars.BLOGGER_LINKEDIN_UPLOAD }}
          BLOGGER_LLM_PROVIDER: ${{ vars.BLOGGER_LLM_PROVIDER }}
          
          # Semiconzone Variables
          SEMICONZONE_MAX_BLOGS_POSTS: ${{ vars.SEMICONZONE_MAX_BLOGS_POSTS }}
          SEMICONZONE_BLOG_UPLOAD: ${{ vars.SEMICONZONE_BLOG_UPLOAD }}
          SEMICONZONE_USER_APPROVAL: ${{ vars.SEMICONZONE_USER_APPROVAL }}
          SEMICONZONE_REJECTED_STATE: ${{ vars.SEMICONZONE_REJECTED_STATE }}
          SEMICONZONE_BLOG_GENERATE: ${{ vars.SEMICONZONE_BLOG_GENERATE }}
          SEMICONZONE_IMAGE_UPLOAD: ${{ vars.SEMICONZONE_IMAGE_UPLOAD }}
          SEMICONZONE_SCHEDULE_INTERVAL: ${{ vars.SEMICONZONE_SCHEDULE_INTERVAL }}
          SEMICONZONE_LINKEDIN_UPLOAD: ${{ vars.SEMICONZONE_LINKEDIN_UPLOAD }}
          SEMICONZONE_LLM_PROVIDER: ${{ vars.SEMICONZONE_LLM_PROVIDER }}
        run: |
          cat > .env << EOF
          # Shared Secrets
          GOOGLE_API_KEY=${GOOGLE_API_KEY}
          COHERE_API_KEY=${COHERE_API_KEY}
          CEREBRAS_API_KEY=${CEREBRAS_API_KEY}
          GH_PAT=${GH_PAT}
          
          # Blogger Secrets
          BLOG_ID=${BLOGGER_BLOG_ID}
          LINKEDIN_ACCESS_TOKEN=${BLOGGER_LINKEDIN_ACCESS_TOKEN}
          IMGBB_CLIENT_ID=${BLOGGER_IMGBB_CLIENT_ID}
          TELEGRAM_BOT_TOKEN=${BLOGGER_TELEGRAM_BOT_TOKEN}
          TELEGRAM_CHAT_ID=${BLOGGER_TELEGRAM_CHAT_ID}
          BLOGGER_BOT_GITHUB_TOKEN=${BLOGGER_BOT_GITHUB_TOKEN}
          
          # Semiconzone Secrets (for multi-site support)
          SEMICONZONE_BLOG_ID=${SEMICONZONE_BLOG_ID}
          SEMICONZONE_LINKEDIN_ACCESS_TOKEN=${SEMICONZONE_LINKEDIN_ACCESS_TOKEN}
          SEMICONZONE_IMGBB_CLIENT_ID=${SEMICONZONE_IMGBB_CLIENT_ID}
          SEMICONZONE_TELEGRAM_BOT_TOKEN=${SEMICONZONE_TELEGRAM_BOT_TOKEN}
          SEMICONZONE_TELEGRAM_CHAT_ID=${SEMICONZONE_TELEGRAM_CHAT_ID}
          SEMICONZONE_BOT_GITHUB_TOKEN=${SEMICONZONE_BOT_GITHUB_TOKEN}
          
          # Blogger Variables
          MAX_BLOGS_POSTS=${BLOGGER_MAX_BLOGS_POSTS}
          BLOG_UPLOAD=${BLOGGER_BLOG_UPLOAD}
          USER_APPROVAL=${BLOGGER_USER_APPROVAL}
          REJECTED_STATE=${BLOGGER_REJECTED_STATE}
          BLOG_GENERATE=${BLOGGER_BLOG_GENERATE}
          IMAGE_UPLOAD=${BLOGGER_IMAGE_UPLOAD}
          SCHEDULE_INTERVAL=${BLOGGER_SCHEDULE_INTERVAL}
          LINKEDIN_UPLOAD=${BLOGGER_LINKEDIN_UPLOAD}
          LLM_PROVIDER=${BLOGGER_LLM_PROVIDER}
          
          # Semiconzone Variables
          SEMICONZONE_MAX_BLOGS_POSTS=${SEMICONZONE_MAX_BLOGS_POSTS}
          SEMICONZONE_BLOG_UPLOAD=${SEMICONZONE_BLOG_UPLOAD}
          SEMICONZONE_USER_APPROVAL=${SEMICONZONE_USER_APPROVAL}
          SEMICONZONE_REJECTED_STATE=${SEMICONZONE_REJECTED_STATE}
          SEMICONZONE_BLOG_GENERATE=${SEMICONZONE_BLOG_GENERATE}
          SEMICONZONE_IMAGE_UPLOAD=${SEMICONZONE_IMAGE_UPLOAD}
          SEMICONZONE_SCHEDULE_INTERVAL=${SEMICONZONE_SCHEDULE_INTERVAL}
          SEMICONZONE_LINKEDIN_UPLOAD=${SEMICONZONE_LINKEDIN_UPLOAD}
          SEMICONZONE_LLM_PROVIDER=${SEMICONZONE_LLM_PROVIDER}
          EOF

      - name: Upload .env as artifact
        uses: actions/upload-artifact@v4
        with:
          name: blogger-env
          path: .env
          retention-days: 1
          include-hidden-files: true

